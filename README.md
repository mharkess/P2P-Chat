# P2P-Chat

For this application, I will use a sqlite3 db to store chats of a user locally. I will use MySQL to store necessary user information needed to discover new users on the application (e.g name). The goal of this project is to create a chat program that does not rely on a centralized server. I plan to have the chats work on a local network (a person will be able to chat with another user on the same internal network). I also plan to establish connections between users via usernames rather than ip addresses (a user will input a username to connect with user rather than their IP address). This is beacause it is a lot simpler for the user to remember a username than an IP address. I also didn't implement queues to send stored messages for when both users are online. The reason I went with this is because if messages that are queued cannot be sent until both the sender and the recipient are online, it would make more sense to just have the users send their messages when both parties are online as the recipient won't be able to recieve messages offline.

## Discovery Module

For this module, I have decided to use a MySQL database hosted on a server to facilitate discovering new users. The database will consist of one table that has all users who use the application. It will have one table with a username column, IP address column and Port column (could remove this and have 1 port to be used, but on different devices.). The IP address and port column will be updated everytime a user connects to the internet, to make sure that clients will be able to communicate to the user reliably, even if a client switches networks. When a user first uses the program, they will be prompted to create a username. Then, the program will take that username along with the local ip and port and upload that data to the centralized database. If a user is not brand new, they are prompted for their username and the ip address of their entry in the centralized server is updated.

## Message Transmission
Messages are sent between users using TCP. To connect to another user, the user is prompted to provide the username of to whom they want to chat to. If the user is offline, the user will be prompted that the desired user is offline and will be forced to choose another user to connect to. If the user connects to a different user, each user can send each other messages in real-time. Messages that are sent during the session are stored in a local SQLite database. If a user closes the session (terminal window) and reopens their chat with a user, the history of messages with that user will not be shown in the terminal (even though it is stored locally). If the chat with a user is open and the user recieves a message, it will be saved directly to storage if the user is not currently talking to that person (if they are, the message that was recieved will be printed on the screen).

## Local DB
The local DB is a SQLite 3 database, to which the .db file and the SQL template (.sql file) is provided in the repository. This database has 1 table, which stores all of the recieved messages from other users. The database stored the username that sent the message, the contents of the message and the timestamp at which the message was recieved. Messages can be filted by user by selecting only the rows with a specific username (rather than having multiple tables for different users.)

## Client
All of the interaction between users in the program is done via the terminal. To start the program, first install all of the packages listed in requirements.txt, and then run the client.py file in the repository. Once in a chat with another user, there can be two commands that can be entered, One is: 'QChat' which quits the program and all related background processes. The other is 'SChat' which allows the user to terminate the current chat connection with one user and establish another connection with a different user to send messages (does not effect message retrieval).